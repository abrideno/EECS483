<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-us" http-equiv="Content-Language" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Changes in Latest Version</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>

<h2><a name="changes">Changes to Spim</a></h2>
<p>The current version of <em>Spim</em> is 9.1 (July 2011), which is a minor 
release that corrects minor bugs in first QtSpim release:</p>
<ul>
	<li>Encountering a breakpoint during execution brings up dialog to continue, 
	single-step or abort.</li>
	<li>Fixed bug in writing log file.</li>
	<li>Fixed bug that printed only half of double floatint point registers.</li>
	<li>Fixed bug in formatting of instructions in text segments.</li>
	<li>Correct bugs in help files and fixed installation process.</li>
	<li>Speed up QtSpim by reducing frequency of screen update.</li>
	<li>Fixed bug in memory mapped IO in QtSpim.</li>
	<li>Fixed bug in timer code on Linux x64.</li>
	<li>Close QtSpim console window when main window closes.</li>
	<li>Added command line parsing to QtSpim.</li>
	<li>Synchronized Window menu items with state of windows.</li>
</ul>
<p>The current version of <em>Spim</em>
 is 9.0 (January 2011), which is a major 
release that introduces <em>QtSpim</em> and fixes some bugs in all versions:</p>
<ul>
	<li>Add Debian package and Linux desktop metadata.</li>
	<li>Moved SVN repository to SourceForge.</li>
	<li>Fit and finish bugs in PCSpim and error parsing quoted command line arguments.</li>
	<li>QtSpim!!!</li>
	<li>Single stepping hung at breakpoint.</li>
	<li>Did not display first 4K of the stack.</li>
	<li>Ported PCSpim to VisualStudio 2010.</li>
	<li>Fixed type errors so code compiles under Linux and on x64 systems.</li>
	<li>Moved version information into CPU/version.h and eliminated old, ad-hoc Configure 
	file for spim and xpsim.</li>
</ul>
<p>The current version of <em>Spim</em>

 is 8.0 (January 2010), which is a minor release 
that cleans up bugs in 7.5 and moves to a BSD license:</p>
<ul>
	<li>Changed install path from /usr to /usr/local and removed -D option to install 
	command (which doesn&#39;t exists on Mac OS X).</li>
	<li>Change license to a BSD license, update copyright notices, and eliminated 
	references to my old email address.</li>
	<li>Simplify alignment of data on stack to ensure enough room is left for environment 
	and args at top of stack.</li>
	<li>Initialize stack with arguments when running program from run dialog.</li>
	<li>read_input filled buffer with last character of file not terminated by newline.</li>
	<li>Links to MIPS documentation were broken.</li>
	<li>Did not return value from exit syscall.</li>
</ul>
<p>The current version of <em>Spim</em>

 is 7.5 (August 2009), which is a minor release 
that cleans up bugs in 7.4:</p>
<ul>
	<li>Correct problem with installer script that did not install appropriate versions 
	of msvcrt and mfc dlls for Visual Studio 9.0.</li>
	<li>Fix install scripts to put exceptions.s at /usr/lib/spim on Linux.</li>
	<li>Fixed major memory leak caused by overwritten instructions not being freed.</li>
	<li>Force redisplay of data segment in situations when register values (such 
	as $sp) have changed.</li>
	<li>Properly initialize PC at first invocation of step operation on PCSPim.</li>
	<li>Fixed bug in Xxpim that caused the step commend to reinitialize the stack.</li>
</ul>
<p>The current version of <em>Spim</em>

 is 7.4 (January 2009), which is a minor release 
that cleans up bugs in 7.3:</p>
<p>1/14/09: Released new version of pcspim.zip to correct problem with installer 
script that did not install appropriate versions of msvcrt and mfc dlls.<br/>1/21/09: 
Released new version of spim.tar.Z and spim.tar.gz to correct problem with install 
command for spim program (but not xspim).</p>
<ul>
	<li>Fixed install directories for Linux systems.</li>
	<li>Retained command line arguments in second and subsequent runs.</li>
	<li>Bug in overflow from low-order word in MADD, MSUB.</li>
	<li>Bug in decoding SPECIAL2 instructions (e.g. madd).</li>
</ul>
<p>The previous version of <em>Spim</em>

 is 7.3 (August 2006), which is a minor release 
that cleans up a number of bugs in 7.2:</p>
<ul>
	<li>Fix for flex 2.5.33 (internal change broke spim&#39;s scanner).</li>
	<li>Exception handler can be a semicolon-separated list of files that will be 
	loaded in order. On Unix, SPIM_EXCEPTION_HANDLER environment variable is consulted 
	before command line arguments.</li>
	<li>Memory corruption caused spim to crash when label was defined twice in succession.</li>
	<li>PCSpim updates register and memory display after a parse error while reading 
	a file.</li>
	<li>Eliminated unnecessary null char between strings in list of strings produced 
	by .asciiz.</li>
	<li>Makefiles (in spim/ and xspim/) now contain clearly defined paths for installing 
	executables, exception handler, and man pages. The man pages are no longer installed 
	by the &quot;make install&quot; command.</li>
	<li>Change psfig to epsfig in spim.tex (does anyone still use this obsolete documentation?).</li>
</ul>
<p>The previous version of <em>Spim</em>

 is 7.2.1 (August 2005), which is a minor 
release that cleans up a number of bugs in 7.1:</p>
<ul>
	<li>Fixed multiple problems in memory mapped IO in xspim and spim.
	(Note: to make programming uniform across 
	all three platforms, memory mapped IO now follows&quot;Unix&quot; handling of carriage 
	return (CR) and new line (NL) characters . On input, a CR is translated to a 
	NL, and on output, a CR is printed after a NL. This was previously true for 
	PCSpim and xspim, but not spim.)</li>
	<li>Fixed bug in indexed address computation in LW and SW instructions.</li>
	<li>Eliminated non-POSIX flags IUCLC and IXANY to facilitate port to Mac OS X.</li>
	<li>Use termios(3) library calls instead of IOCTLs to fix bug introduced in port 
	from termio to termios struct.</li>
	<li>Test default case for jalr, without default $rd (=31).</li>
	<li>Trap handler in test extracted wrong bits from ExcCode field of Cause register.</li>
	<li>Pervasive restructuring of files to put 3 UIs (spim, xspim, PCSpim) in separate 
	directories and cleanup organization and Makefiles.</li>
	<li>Use correct help file in install process.</li>
	<li>Added work-around for bug in flex 2.5.31 that left yytext_ptr undefined.</li>
	<li>Epilogue code restored $at register, then used a pseduo instructions that 
	smashed it.</li>
	<li>Cleared filename when reinitializing PCSpim, which broke next reload command.</li>
</ul>
<p>The previous version of <em>Spim</em>

 is 7.1 (January 2005), which is a minor release 
that cleans up a number of bugs in 7.0:</p>
<ul>
	<li>Minor cleanup.</li>
	<li>Switched Windows installer to Microsoft .msi installer, from InstallShield.</li>
	<li>exceptions.s used wrong mask for exception cause field.</li>
	<li>Clearing the transmitter or receiver interrupt enable bits also clear interrupt 
	pending bits in Cause register.</li>
	<li>Code to poll for a console input character in X windows blocked and prevented 
	any output until input occured.</li>
	<li>Type of &quot;mul&quot; instruction was wrong, which lead to it being printed without 
	destination register.</li>
	<li>Print underlying instruction, not breakpoint.</li>
	<li>Unparing error that unparsed beq as beql.</li>
	<li>Eliminated dependence on obsolete termio.h in favor of POSIX termios.h since 
	Mac OS X doesn&#39;t have termio.h any more.</li>
	<li>Fix null pointer problem if no entries in registry.</li>
	<li>Turn off EXL bit after break instruction, since break is handled by spim, 
	not MIPS, code and the bit was never cleared.</li>
	<li>Set default path for exceptions.s to C:\Program Files\PCSpim, the default 
	installation directory.</li>
	<li>Test for SQRT.S used double constant, which failed on SPARC (but not x86).</li>
</ul>
<p>The previous version of <em>Spim</em>

 is 7.0 (August 2004), which is a major release 
that contains a significant number of changes from version 6.5:</p>
<ul>
	<li>Upgraded simulator to MIPS32, Version 1 architecture (except details of FPU 
	and memory).</li>
	<li>Exceptions and interrupts reimplemented, to make them closer to the actual 
	hardware.</li>
	<li>Memory mapped IO console reimplemented to make it work properly.</li>
	<li>Implemented timer in CPU.</li>
	<li>Renamed &quot;trap&quot; to &quot;exception&quot; to correspond to MIPS terminology.</li>
	<li>Introduced short forms of command line arguments and dropped need for &quot;-file&quot; 
	argument.</li>
	<li>Major internal cleanup and reorganization of code to eliminate unused code 
	and simplify implementation.</li>
	<li>PCSpim prompts about reinitialization when file reloaded.</li>
	<li>PCSpim lets user set font.</li>
	<li>Word align all segment boundaries and ensure sbrk returns word-aligned addresses.</li>
	<li>Added new syscall (EXIT2_SYSCALL) that returns value from SPIM.</li>
	<li>Improved implementation of delayed load instructions.</li>
	<li>Refactored the test cases, so that endian-independent code is in tt.core.s</li>
	<li>Many small bug fixes.</li>
</ul>
<p>Outstanding bugs in 7.0:</p>
<ul>
	<li>The trap handler (exceptions.s) fails when the trapping instruction is in 
	the delay slot of a branch or jump. The trap handler returns by simplemindedly 
	adding 4 to the EPC (which is the branch&#39;s address in this case), so it does 
	not return to the instruction executed after the trapping instruction.</li>
	<li>Handling of newlines and carriage returns is inconsistent between platforms. 
	When a program prints a newline, PCSpim also prints a carriage return, spim 
	and xspim don&#39;t. Or, is this consistent with the underlying platform?</li>
</ul>
<p>The previous version of <em>Spim</em>

 is 6.5 (January 2003), which contains the 
following changes from version 6.4:</p>
<ul>
	<li>If started program is started with only one argument, assume it is a file 
	name.</li>
	<li>Added Alt-F4 shortcut to PCSpim.</li>
	<li>Fixed trap.handler to return to instruction at EPC on interrupt. </li>
	<li>Fixed (real!) hardware exception on integer overflow in division.</li>
	<li>-trap_file did not properly parse argument in xspim.</li>
	<li>Fixed printing of error on last line without a carriage return.</li>
	<li>Print proper registers when printing hex FP numbers.</li>
	<li>Properly zero newly allocated memory.</li>
	<li>Added nops (addu $0, $0, 0) to trap handler, so that it works properly in 
	bare mode!</li>
	<li>PCSPIM.HLP file was corrupted.</li>
</ul>
<p>The previous version of <em>Spim</em>

 is 6.4 (January 2002), which contains the 
following changes from version 6.3:</p>
<ul>
	<li>PCSpim no longer shifts the focus of the register and data segments when 
	values change.</li>
	<li>Fixed bug in the expansion of USH pseudo-op.</li>
	<li>Add system calls for open, close, read, and write.</li>
	<li>Fixed the Configure file to work with Mac OSX.</li>
	<li>Made the REM pseudo-op require 3 arguments.</li>
	<li>Fixed PCSpim dumping code to dump contents of console window.</li>
	<li>Treat LUI&#39;s immediate value as unsigned, as it is not sign extended.</li>
	<li>More error checking for malformed programs.</li>
	<li>Make symbol &quot;main&quot; as global.</li>
	<li>Avoid clearing last few bytes of data segments when they expand.</li>
	<li>Check that high-order 4 bits in jump instruction&#39;s PC match bits in target 
	PC.</li>
</ul>
<p>The previous version of <em>Spim</em>

 is 6.3 (January 2001), which contains the 
following changes from version 6.2:</p>
<ul>
	<li>PCSpim interface simplified to 4 fixed panes, similar to xspim, which permit 
	cut and paste. </li>
	<li>PCSpim console stays on the screen after assembly program&nbsp; terminates.
	</li>
	<li>Comments in assembly source displayed in text segment. </li>
	<li>NOP is standardized to sll $0 $0 0 (= 0x00000000) </li>
	<li>Fixed several bugs and missed optimization in computing immediate values 
	in lw/sw instruction sequences. </li>
	<li>High 2 bits in negative branch offsets were incorrect. </li>
	<li>Display floating point registers with up to 18 digits of precision. </li>
	<li>New spim command (print_all_regs) prints all registers. </li>
	<li>Minor changes to compile spim under cygwin for Windows. </li>
	<li>Validate the range of immediate values in MIPS (but not pseudo) instructions.
	</li>
	<li>Fixed display of stack with non-word aligned $sp. </li>
	<li>New flags: </p>
	<ul>
		<li>
		-delayed-branches&nbsp; Simulate MIPS delayed control transfers for branches, 
		jumps, and calls
		</li>
		<li>
		-delayed-loads Simulate MIPS non-interlocked loads.
		</li>
	</ul>
	</li>
</ul>
<hr />
</body>

</html>
